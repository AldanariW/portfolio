(()=>{"use strict";var e={709:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ASCIIAnimation=void 0,t.ASCIIAnimation=class{constructor(e,t,s){var n,i;if(this.id=$(`#${s}`),0===this.id.length)throw new Error(`The component with id ${s} does not exist`);if((null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0)<1)throw new Error(`Not enough frames, found : ${null!==(i=null==e?void 0:e.length)&&void 0!==i?i:void 0}`);this.speed=t,this.currentFrame=0,this.frames=e.map((e=>e.replace(/ /g,"&nbsp"))),this.animFunction=()=>{this.id.html(this.frames[this.currentFrame]),this.currentFrame=(this.currentFrame+1)%this.frames.length}}start(){this.currentFrame=0,this.animation=window.setInterval(this.animFunction,this.speed)}stop(){this.currentFrame=0,clearInterval(this.animation)}resume(){this.animation=window.setInterval(this.animFunction,this.speed)}pause(){clearInterval(this.animation)}}},114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandParser=void 0,t.CommandParser=class{static parseName(e){return e.slice(0,e.indexOf(" ")+1||void 0).trim()}static parseArgs(e){let t=new Map,s=0;const n=()=>s>=e.length;for(;" "!==e[s]&&!n();)s++;for(;!n();){for(;"-"!==e[s]&&!n();)s++;s++,"-"===e[s]&&s++;let i=s;for(;" "!==e[s]&&!n();)s++;if(s===i)break;let r=e.slice(i,s);for(t.set(r,void 0);" "===e[s]&&!n();)s++;if("-"!==e[s]){for(i=s;" "!==e[s]&&!n();)s++;if(s>i){let n=e.slice(i,s);t.set(r,isNaN(Number(n))?n:Number(n))}}}return t}}},936:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationCli=void 0;const i=s(540),r=s(709),a=s(934),o=n(s(771));class l extends i.Cli{constructor(){super("anim","an animation",(()=>"")),this.animations=new Map,this.availableAnimations=Object.keys(o.default),this.validator=new a.ArgValidator([{name:"animation",alias:"a",description:"The name of the animation",type:"string",required:!0},{name:"time",alias:"t",description:"The time between animation frames, a lower time means a faster animation",type:"number",required:!1}])}output(){return this.args.has("help")?this.help()+`\n\nAvailable animations : ${this.availableAnimations.join(", ")}`:(this.currentId=Date.now(),`<pre class="animation" id="${this.currentId}"></pre>`)}execute(){var e;if(void 0===this.currentId)return{succes:!1,errors:"Animation failed to start, cause: Id is undefined at the time of animation instanciation"};let t=this.validator.getArg("a");try{const s=null!==(e=this.validator.getArg("t"))&&void 0!==e?e:100;let n=new r.ASCIIAnimation(o.default[t],s,this.currentId.toString());n.start(),this.animations.set(this.currentId,n)}catch(e){return{succes:!1,errors:"Animation failed to start, cause: "+e}}return{succes:!0,errors:""}}parseArgs(e){const t=super.parseArgs(e);if(!t.succes)return t;const s=void 0!==this.validator.getArg("help"),n=this.validator.getArg("a");return s||this.availableAnimations.includes(n)?{succes:!0,errors:"",follow:!s}:{succes:!1,errors:`animation '${n}' is not a valid animation, type 'anim -help' to see the list of animations.`,follow:!1}}}t.AnimationCli=l},825:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandListCli=void 0;const n=s(540);class i extends n.Cli{constructor(e){super("help","Lists all available commands",(()=>this.listCommands())),this.cliInstances=e}listCommands(){return`Command List :\n - ${this.cliInstances.map((e=>`${e.name}: ${e.desc}`)).join("\n - ")}`}}t.CommandListCli=i},821:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContentCli=void 0,t.showPane=l,t.hidePane=c,t.setContent=u;const n=s(540);let i,r,a;$((()=>{i=$(".modal-pane"),r=$(".modal-overlay"),a=$("body")}));class o extends n.Cli{constructor(e,t,s){super(e,t,(()=>`Showing ${e}...`)),this.content=s}execute(){u('<div id="loading-div">Loading...</div>'),l();let e="";return $.ajax({url:this.content,method:"GET",success:e=>u(e),error:()=>{c(),e=`failed to load content : ${this.content}`}}),{succes:0===e.length,errors:e}}}function l(){r.fadeIn(),a.addClass("body-fixed")}function c(){r.fadeOut(),a.removeClass("body-fixed")}function u(e){i.children().not(".close-button").remove(),i.append(e)}t.ContentCli=o},161:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectCli=void 0;const n=s(540);class i extends n.Cli{constructor(e,t,s){super(e,s),this.url=t}output(){return this.args.has("help")?this.help():`Opening ${this.name}...`}execute(){const e=window.open(this.url,"_blank");return null!==e?(e.focus(),{succes:!0,errors:""}):{succes:!1,errors:"L'ouverture du lien a échoué, la nouvelle fenetre a été bloqué par l'utilisateur"}}}t.RedirectCli=i},248:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TestCli=void 0;const n=s(540);class i extends n.Cli{constructor(){super("test","a helper cli",(()=>`cli ${this.name} called with args ${JSON.stringify(Object.fromEntries(this.args))}`))}}t.TestCli=i},934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArgValidator=void 0,t.ArgValidator=class{constructor(e){const t=(e,t)=>Array.from(e.reduce(((e,s)=>s[t]?e.set(s[t],(e.get(s[t])||0)+1):e),new Map)).filter((([e,t])=>t>1)).map((([e,t])=>e)),s=t(e,"name");if(s.length>0)throw new Error(`Dupliacte name of argument :${s.join(", ")}`);const n=t(e,"alias");if(n.length>0)throw new Error(`Overlapping alias :${n.join(", ")}`);const i=e.filter((t=>e.some((e=>t.alias===e.name))));if(i.length>0)throw new Error(`The following aliases overlap at least one argument name :${i}`);this.schema=new Map,e.forEach((e=>{this.schema.set(e.name,e),e.alias&&this.schema.set(e.alias,e)}))}validate(e){const t=new Set,s=new Set;for(const[n,i]of e.entries()){if("help"===n)return{success:!0,errors:""};const e=this.schema.get(n);e?(typeof i!==e.type&&t.add(`Invalid type for ${e.name}: expected ${e.type}, got ${typeof i}`),e.required&&(s.add(e.name),e.alias&&s.add(e.alias))):t.add(`Unknown argument: ${n}`)}for(const[e,n]of this.schema.entries())n.required&&!s.has(e)&&t.add(`Missing required argument: ${n.name}`);return 0===t.size&&this.schema.forEach((t=>{var s;t.value=null!==(s=e.get(t.name))&&void 0!==s?s:t.alias?e.get(t.alias):void 0})),{success:0===t.size,errors:Array.from(t.values()).join("\n")}}getArg(e){var t;return null===(t=this.schema.get(e))||void 0===t?void 0:t.value}generateHelp(){return Array.from(new Set(this.schema.values())).map((e=>{const t=e.alias?` (-${e.alias})`:"",s=e.required?" [required]":"";return`--${e.name}${t}${s}: ${e.description}\n  Type: ${e.type}`})).join("\n\n")}}},540:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cli=void 0;const n=s(114);t.Cli=class{constructor(e,t,s){this.name=e,this.desc=t,this.callable=s,this.args=new Map}help(){return void 0!==this.validator?this.validator.generateHelp():this.desc}output(){var e,t;return this.args.has("help")?this.help():null!==(t=null===(e=this.callable)||void 0===e?void 0:e.call(this,this.args))&&void 0!==t?t:this.name}parseArgs(e){if(this.args=n.CommandParser.parseArgs(e),this.validator){const e=this.validator.validate(this.args);return{succes:e.success,errors:e.errors,follow:!1}}return{succes:!0,errors:"",follow:!this.args.has("help")}}}},489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExecutable=function(e){return void 0!==e&&"execute"in e}},482:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShellInterface=void 0;const n=s(489),i=s(114);t.ShellInterface=class{constructor(...e){this.$terminal=$("#terminal"),this.$output=$("#output"),this.$input=$("#command-input"),this.clis=e,this.history={commands:[],currentIndex:-1},this.initializeEventListeners()}initializeEventListeners(){this.$input.on("keydown",(e=>{switch(e.key){case"Enter":this.handleCommand(),this.$terminal.scrollTop(this.$terminal[0].scrollHeight);break;case"ArrowUp":e.preventDefault(),this.navigateHistory("up");break;case"ArrowDown":e.preventDefault(),this.navigateHistory("down")}}))}navigateHistory(e){0!==this.history.commands.length&&("up"===e?this.history.currentIndex>0&&(this.history.currentIndex--,this.$input.val(this.history.commands[this.history.currentIndex])):this.history.currentIndex<this.history.commands.length-1?(this.history.currentIndex++,this.$input.val(this.history.commands[this.history.currentIndex])):this.history.currentIndex=this.history.commands.length)}handleCommand(){const e=(e,s)=>{this.$output.append(`<span class="prompt">$</span><span>${t}</span><br><span class="${s}">${e}</span><br>`)},t=this.$input.val();if(this.$input.val(""),t.trim()){this.history.commands.push(t),this.history.currentIndex=this.history.commands.length;const s=this.clis.find((e=>i.CommandParser.parseName(t)===e.name));if(void 0===s)e(`Commmande inconnue: ${t}`,"err");else{const i=s.parseArgs(t);if(e(i.succes?s.output():i.errors,i.succes?"":"err"),i.succes&&i.follow&&(0,n.isExecutable)(s)){const t=s.execute();t.succes||e(t.errors,"err")}}}}}},771:e=>{e.exports=JSON.parse('{"gliding-arrow":[">   "," >  ","  > ","   >","   <","  < "," <  ","<   "],"wiggling-bars":["///","|||","\\\\\\\\\\\\","|||"],"waving-guy":[".(^-^)\'","-(^-^)-","\'(^-^).","-(^o^)-",".(^-^)\'","-(^-^)-","\'(^-^).","-(^-^)-"],"loading-arrows":["[>    ]","[>>   ]","[>>>  ]","[ >>> ]","[  >>>]","[   >>]","[    >]","[     ]"],"looping-arrow":["+--+\\n|> |\\n|  |\\n+--+","+--+\\n| >|\\n|  |\\n+--+","+--+\\n| v|\\n|  |\\n+--+","+--+\\n|  |\\n| v|\\n+--+","+--+\\n|  |\\n| <|\\n+--+","+--+\\n|  |\\n|< |\\n+--+","+--+\\n|  |\\n|^ |\\n+--+","+--+\\n|^ |\\n|  |\\n+--+"]}')}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}(()=>{const e=s(482),t=s(161),n=s(248),i=s(825),r=s(936),a=s(821),o="content";$((()=>{const s=[new t.RedirectCli("github","https://github.com/AldanariP","Just type 'github' to open the github profile in the new tab"),new n.TestCli,new r.AnimationCli,new a.ContentCli("lorem","a test modal pane",`${o}/lorem_ipsum.html`),new a.ContentCli("competences","Mes competences acquisent avec mon B.U.T. Informatique",`${o}/competences_pn.html`)];s.push(new i.CommandListCli(s)),new e.ShellInterface(...s);const l=$("#command-input");$("body").on("mouseup",(()=>{setTimeout((()=>{l.trigger("focus")}),0)})),$(".modal-pane").on("click",(function(e){e.stopPropagation()})),$(".close-button, .modal-overlay").on("click",(function(e){e.target===this&&(0,a.hidePane)()})),$(document).on("keyup",(function(e){"Escape"===e.key&&(0,a.hidePane)()}))}))})()})();
//# sourceMappingURL=bundle.js.map